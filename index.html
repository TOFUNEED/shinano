<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>しなの鉄道 時刻表</title>
    <!-- アプリの見た目を定義するCSSファイルを読み込みます -->
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>

    <!-- アプリケーション全体のコンテナ -->
    <div id="app-container">

        <!-- ===============================================
             メイン画面 (常に表示される画面)
             =============================================== -->
        <div id="main-screen">
            <header>
                <!-- 駅名表示エリア -->
                <h1 id="station-name">しなの鉄道</h1>
                
                <!-- ユーザー情報/ログインボタン表示エリア -->
                <div id="user-area">
                    <!-- ゲスト状態の時に表示するボタン -->
                    <button id="show-login-modal-button" class="btn">ログイン / 新規登録</button>
                    
                    <!-- ログイン済みの時に表示する情報 (初期状態では隠れている) -->
                    <div id="user-info" class="hidden">
                        <span id="coin-display">0 コイン</span>
                        <button id="mypage-button">マイページ</button>
                        <button id="logout-button">ログアウト</button>
                    </div>
                </div>
            </header>

            <main>
                <!-- 上り/下り方面を切り替えるタブ -->
                <div class="tabs">
                    <button class="tab-button active" data-direction="up">軽井沢方面</button>
                    <button class="tab-button" data-direction="down">長野方面</button>
                </div>

                <!-- 時刻表の表示エリア -->
                <div id="timetable-display">
                    <!-- 次の電車の情報を表示するカード -->
                    <div class="train-card next-train">
                        <h2>次の電車</h2>
                        <p class="time">--:--</p>
                        <p class="destination">---行き</p>
                        <p class="countdown">あと --分--秒</p>
                    </div>
                    <!-- 次々の電車の情報を表示するカード -->
                    <div class="train-card following-train">
                        <h2>次々の電車</h2>
                        <p class="time">--:--</p>
                        <p class="destination">---行き</p>
                    </div>
                </div>
            </main>

            <footer>
                <!-- フッターメニューなど (将来的な拡張用) -->
            </footer>
        </div>


        <!-- ===============================================
             ログイン/新規登録モーダル (ポップアップ - 初期状態では隠れている)
             =============================================== -->
        <div id="auth-modal" class="modal-background hidden">
            <div class="modal-content">
                <button id="close-modal-button" class="close-button">&times;</button>
                <h2>アカウント</h2>
                <div class="form-group">
                    <label for="email">メールアドレス</label>
                    <input type="email" id="email" placeholder="test@example.com" autocomplete="email">
                </div>
                <div class="form-group">
                    <label for="password">パスワード (6文字以上)</label>
                    <input type="password" id="password" autocomplete="current-password">
                </div>
                <button id="login-button" class="btn">ログイン</button>
                <button id="signup-button" class="btn">新規登録</button>
                <!-- エラーメッセージ表示用の領域 -->
                <p id="auth-error" class="error-message hidden"></p>
            </div>
        </div>


        <!-- ===============================================
             ログインボーナス・ポップアップ (初期状態では隠れている)
             =============================================== -->
        <div id="bonus-popup" class="hidden">
            <div class="popup-content">
                <!-- JavaScriptによって内容が動的に挿入されます -->
            </div>
        </div>
    </div>

    <!-- ===============================================
         Firebase SDK & アプリケーションスクリプト
         type="module" でモジュールとして読み込みます
         =============================================== -->
    <script type="module" src="assets/js/firebase-config.js"></script>
    <script type="module" src="assets/js/ui.js"></script>
    <script type="module" src="assets/js/auth.js"></script>
    <script type="module" src="assets/js/firestore.js"></script>
    <script type="module" src="assets/js/timetable.js"></script>
    <script type="module" src="assets/js/main.js"></script> <!-- 司令塔は最後に -->

</body>
</html>